<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crear Encuesta</title>
  <link rel="stylesheet" href="css/encuesta.css">
  <script src="js/en.js"></script>
</head>
<body>
  <header>
    <div class="container" onclick="window.location.href='index.html'">
      <div class="logo-container">
        <svg class="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="#ffffff" d="M17 2v2h3.007c.548 0 .993.445.993.993v16.014a.994.994 0 0 1-.993.993H3.993A.993.993 0 0 1 3 21.007V4.993C3 4.445 3.445 4 3.993 4H7V2zM7 6H5v14h14V6h-2v2H7zm2 10v2H7v-2zm0-3v2H7v-2zm0-3v2H7v-2zm6-6H9v2h6z"/></svg>
        <h1>Encuestas</h1>
      </div>
    
      <button class="btn-menu">
        <svg class="icono" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20"><path fill="#ffffff" d="M1 3v2h18V3zm0 8h18V9H1zm0 6h18v-2H1z"/></svg>
      </button>
    </div> 
    <nav class="menu-nav" id="menu">
      <button class="btn-cerrar">
          <svg class="icono" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 20 20"><path fill="#5409DA" d="M1 3v2h18V3zm0 8h18V9H1zm0 6h18v-2H1z"/></svg>
     </button>
      <h2>Bienvenido/a Briseida Garcia</h2>
      <a href="index.html">Mis encuestas</a>
      <a href="index.html">Otras encuestas</a>
      <input  type="button" class="cerrar" value="Cerrar sesión">
  </nav> 
</header>

  <main class="contenedor">
    <h2>Crear encuesta</h2>
    <label class="instruccion">
      Las preguntas deben poder responderse en una escala del 1 al 5.<br>
      Ejemplo: “¿Qué tanto te agrada la comida de la cafetería?”
    </label>

    <input type="text" id="tituloEncuesta" placeholder="Formulario sin título" class="titulo-encuesta">

    <form id="formularioPreguntas">
    </form>

    <p id="mensajeError" class="error"></p>

    <button class="btn-agregar" onclick="agregarPregunta()">
      <span>➕ Agregar nueva pregunta</span>
    </button>

    
    <button class="btn-guardar" onclick="guardarEncuesta()">
        Guardar encuesta
      </button>
  </main>


</body>
<script>
    function agregarPregunta() {
      const formulario = document.getElementById("formularioPreguntas");
      const error = document.getElementById("mensajeError");
      const preguntas = formulario.querySelectorAll(".pregunta");

      if (preguntas.length >= 10) {
        error.textContent = "Solo se pueden agregar hasta 10 preguntas.";
        error.style.display = "block";
        return;
      }

      error.style.display = "none";
      const nuevaPregunta = document.createElement("div");
      nuevaPregunta.classList.add("pregunta");
      nuevaPregunta.innerHTML = `
        <label>${preguntas.length + 1}.</label>
        <input type="text" placeholder="Escriba su pregunta">
      `;
      formulario.appendChild(nuevaPregunta);
    }

    //estoy usando este codigo de prueba jsjs debemos hacerlo real
    function guardarEncuesta() {
      const titulo = document.getElementById("tituloEncuesta").value.trim();
      const preguntas = [...document.querySelectorAll("#formularioPreguntas input")].map(i => i.value.trim());
      const error = document.getElementById("mensajeError");

      if (!titulo) {
        error.textContent = "El título no puede estar vacío.";
        error.style.display = "block";
        return;
      }

      if (preguntas.some(p => p === "")) {
        error.textContent = "No puedes dejar preguntas vacías.";
        error.style.display = "block";
        return;
      }

      error.style.display = "none";

      // Aquí iría el guardado real (servidor )
      alert("Encuesta guardada exitosamente.");
      window.location.href = "index.html"; 
    }
  </script>
</html>
